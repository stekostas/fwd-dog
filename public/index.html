<!DOCTYPE html>
<html lang="en">
<head>
    <title>Short URL Generator - fwd.dog</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@900&family=Montserrat:wght@500&display=swap" rel="stylesheet">
</head>
<body>
    <h1 class="title"><a href="/">fwd.dog</a></h1>
    {{if .Success}}
        <p>Here's your short link:</p>
        <span class="msg link-msg">{{.Link}}</span>
        <input type="text" id="short-link" value="{{.Link}}">
        <button class="cta-btn" id="copy-btn" onclick="myFunction()">COPY</button>
        <script>
            function myFunction() {
                const copyText = document.getElementById("short-link");

                copyText.select();
                copyText.setSelectionRange(0, 99999); /*For mobile devices*/

                document.execCommand("copy");

                const copyBtn = document.getElementById("copy-btn");
                const original = copyBtn.innerText;

                copyBtn.innerText = "Copied!";
                copyBtn.setAttribute("disabled", "disabled")

                setTimeout(function () {
                    copyBtn.innerText = original;
                    copyBtn.removeAttribute("disabled")
                }, 800);
            }
        </script>
    {{else}}
        {{if .Message}}
            <span class="msg error-msg">{{.Message}}</span>
        {{end}}
    <form action="/" method="post">
        <div class="cta-container">
            <p>I want to generate a short link for the URL</p>
            <input type="url" autofocus required name="url" class="input-field" placeholder="https://foo.bar/baz">
            <p>that will expire after</p>
            <select class="input-field" name="ttl">
                <option value="300">5 minutes</option>
                <option value="1800">30 minutes</option>
                <option value="3600">1 hour</option>
                <option value="43200">12 hours</option>
                <option value="86400">1 day</option>
            </select>
        </div>
        <input type="submit" class="cta-btn" value="GO">
    </form>
    {{end}}
</body>
</html>